<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOM PRODUCT - Kategoriyalar</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#10b981',
                        'primary-dark': '#059669',
                        secondary: '#1f2937',
                        accent: '#f59e0b'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50">
    <!-- Navigation Header -->
    <header class="gradient-bg text-white sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <!-- Back Button & Logo -->
                <div class="flex items-center space-x-3">
                    <button onclick="goBack()" class="p-2 hover:bg-white/20 rounded-lg transition-colors md:hidden">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <a href="index.html" class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7Z"/>
                            </svg>
                        </div>
                        <div class="hidden md:block">
                            <h1 class="text-xl font-bold">DOM PRODUCT</h1>
                            <p class="text-xs text-green-200">Kategoriyalar</p>
                        </div>
                    </a>
                </div>

                <!-- Search Bar (Desktop) -->
                <div class="hidden md:flex flex-1 max-w-md mx-8">
                    <div class="relative w-full">
                        <input type="text"
                               id="search-input"
                               placeholder="Kategoriyalarni qidiring..."
                               class="w-full px-4 py-2 rounded-lg bg-white/20 text-white placeholder-green-200 border border-white/30 focus:border-primary focus:outline-none">
                        <button onclick="handleSearch()" class="absolute right-2 top-2 text-green-200 hover:text-white">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- User Actions -->
                <div class="flex items-center space-x-4">
                    <!-- Cart -->
                    <a href="cart.html" class="relative p-2 hover:bg-white/20 rounded-lg transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"></path>
                        </svg>
                        <span class="absolute -top-1 -right-1 bg-accent text-xs text-white rounded-full w-5 h-5 flex items-center justify-center" id="cart-count">0</span>
                    </a>

                    <!-- Profile -->
                    <a href="profile.html" class="p-2 hover:bg-white/20 rounded-lg transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Mobile Search -->
            <div class="md:hidden pb-4">
                <div class="relative">
                    <input type="text"
                           id="mobile-search-input"
                           placeholder="Kategoriyalarni qidiring..."
                           class="w-full px-4 py-2 rounded-lg bg-white/20 text-white placeholder-green-200 border border-white/30 focus:border-primary focus:outline-none">
                    <button onclick="handleMobileSearch()" class="absolute right-2 top-2 text-green-200 hover:text-white">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6">
        <!-- Page Title -->
        <div class="mb-6">
            <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">Barcha kategoriyalar</h2>
            <p class="text-gray-600">Kerakli mahsulotni toping</p>
        </div>

        <!-- Filter Tabs -->
        <div class="flex space-x-2 mb-6 overflow-x-auto scrollbar-hide">
            <button onclick="filterCategories('all')"
                    class="filter-tab active px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors">
                Barchasi
            </button>
            <button onclick="filterCategories('popular')"
                    class="filter-tab px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors">
                Mashhur
            </button>
            <button onclick="filterCategories('new')"
                    class="filter-tab px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors">
                Yangi
            </button>
            <button onclick="filterCategories('featured')"
                    class="filter-tab px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-colors">
                Tavsiya etilgan
            </button>
        </div>

        <!-- Categories Grid -->
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4" id="categories-grid">
            <!-- Categories will be loaded here -->
        </div>

        <!-- Loading State -->
        <div id="loading" class="text-center py-12 hidden">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
            <p class="mt-2 text-gray-600">Yuklanmoqda...</p>
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="text-center py-12 hidden">
            <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
            </svg>
            <h3 class="text-lg font-semibold text-gray-700 mb-2">Kategoriya topilmadi</h3>
            <p class="text-gray-500">Qidiruv so'zini o'zgartirib ko'ring</p>
        </div>
    </main>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50">
        <div class="flex items-center justify-around py-2">
            <a href="index.html" class="flex flex-col items-center py-2 px-3 text-gray-500">
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                </svg>
                <span class="text-xs mt-1">Bosh sahifa</span>
            </a>
            <a href="categories.html" class="flex flex-col items-center py-2 px-3 text-primary">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
                </svg>
                <span class="text-xs mt-1">Kategoriya</span>
            </a>
            <a href="cart.html" class="flex flex-col items-center py-2 px-3 text-gray-500">
                <div class="relative">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5 6m0 0h9"/>
                    </svg>
                    <span class="absolute -top-2 -right-2 bg-accent text-xs text-white rounded-full w-4 h-4 flex items-center justify-center">0</span>
                </div>
                <span class="text-xs mt-1">Savat</span>
            </a>
            <a href="search.html" class="flex flex-col items-center py-2 px-3 text-gray-500">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
                <span class="text-xs mt-1">Qidiruv</span>
            </a>
            <a href="profile.html" class="flex flex-col items-center py-2 px-3 text-gray-500">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                </svg>
                <span class="text-xs mt-1">Profil</span>
            </a>
        </div>
    </nav>

    <script>
        // Demo categories data
        const categoriesData = [
            { id: 1, name: "Mevalar", slug: "fruits", icon: "🍎", count: 120, popular: true, featured: true, new: false },
            { id: 2, name: "Sabzavotlar", slug: "vegetables", icon: "🥬", count: 85, popular: true, featured: true, new: false },
            { id: 3, name: "Go'sht mahsulotlari", slug: "meat", icon: "🥩", count: 45, popular: true, featured: false, new: false },
            { id: 4, name: "Sut mahsulotlari", slug: "dairy", icon: "🥛", count: 32, popular: true, featured: true, new: false },
            { id: 5, name: "Non va g'alla", slug: "bakery", icon: "🍞", count: 28, popular: false, featured: false, new: false },
            { id: 6, name: "Ichimliklar", slug: "drinks", icon: "🥤", count: 64, popular: true, featured: false, new: false },
            { id: 7, name: "Shirinliklar", slug: "sweets", icon: "🍭", count: 41, popular: false, featured: false, new: true },
            { id: 8, name: "Muzqaymoq", slug: "ice-cream", icon: "🍦", count: 15, popular: false, featured: false, new: true },
            { id: 9, name: "Baliq mahsulotlari", slug: "fish", icon: "🐟", count: 22, popular: false, featured: false, new: false },
            { id: 10, name: "Parranda go'shti", slug: "poultry", icon: "🐔", count: 18, popular: false, featured: true, new: false },
            { id: 11, name: "Ziravorlar", slug: "spices", icon: "🌶️", count: 35, popular: false, featured: false, new: false },
            { id: 12, name: "Yong'oqlar", slug: "nuts", icon: "🥜", count: 24, popular: false, featured: false, new: true },
            { id: 13, name: "Quruq mevalar", slug: "dried-fruits", icon: "🍇", count: 19, popular: false, featured: false, new: false },
            { id: 14, name: "Konserva", slug: "canned", icon: "🥫", count: 52, popular: false, featured: false, new: false },
            { id: 15, name: "Organik mahsulotlar", slug: "organic", icon: "🌱", count: 33, popular: false, featured: true, new: true },
            { id: 16, name: "Choy va qahva", slug: "tea-coffee", icon: "☕", count: 27, popular: true, featured: false, new: false }
        ];

        let currentFilter = 'all';
        let searchQuery = '';
        let allCategories = [...categoriesData];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadCategories();
            updateCartCount();
        });

        function loadCategories() {
            showLoading(true);

            // Simulate API delay
            setTimeout(() => {
                displayCategories(getFilteredCategories());
                showLoading(false);
            }, 500);
        }

        function getFilteredCategories() {
            let filtered = [...allCategories];

            // Apply filter
            if (currentFilter !== 'all') {
                filtered = filtered.filter(category => category[currentFilter]);
            }

            // Apply search
            if (searchQuery) {
                filtered = filtered.filter(category =>
                    category.name.toLowerCase().includes(searchQuery.toLowerCase())
                );
            }

            return filtered;
        }

        function displayCategories(categories) {
            const grid = document.getElementById('categories-grid');
            const emptyState = document.getElementById('empty-state');

            if (categories.length === 0) {
                grid.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');

            grid.innerHTML = categories.map(category => `
                <div class="product-card card-hover" onclick="openCategory('${category.slug}')">
                    <div class="aspect-square bg-gray-100 flex items-center justify-center text-4xl md:text-5xl">
                        ${category.icon}
                    </div>
                    <div class="product-info text-center">
                        <h3 class="product-title text-sm md:text-base">${category.name}</h3>
                        <p class="product-category">${category.count} mahsulot</p>
                        ${category.new ? '<span class="inline-block bg-accent text-white text-xs px-2 py-1 rounded-full mt-2">Yangi</span>' : ''}
                        ${category.featured ? '<span class="inline-block bg-primary text-white text-xs px-2 py-1 rounded-full mt-2">Top</span>' : ''}
                    </div>
                </div>
            `).join('');
        }

        function filterCategories(filter) {
            currentFilter = filter;

            // Update active filter tab
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            loadCategories();
        }

        function openCategory(slug) {
            window.location.href = `products.html?category=${slug}`;
        }

        function showLoading(show) {
            const loading = document.getElementById('loading');
            const grid = document.getElementById('categories-grid');

            if (show) {
                loading.classList.remove('hidden');
                grid.classList.add('hidden');
            } else {
                loading.classList.add('hidden');
                grid.classList.remove('hidden');
            }
        }

        function handleSearch() {
            searchQuery = document.getElementById('search-input').value;
            loadCategories();
        }

        function handleMobileSearch() {
            searchQuery = document.getElementById('mobile-search-input').value;
            loadCategories();
        }

        // Search on Enter key
        document.getElementById('search-input')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });

        document.getElementById('mobile-search-input')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleMobileSearch();
            }
        });

        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            const count = cart.reduce((total, item) => total + item.quantity, 0);

            document.querySelectorAll('[id="cart-count"], .bg-accent').forEach(element => {
                element.textContent = count;
            });
        }

        function goBack() {
            if (document.referrer) {
                history.back();
            } else {
                window.location.href = 'index.html';
            }
        }

        // Add filter tab styles
        const style = document.createElement('style');
        style.textContent = `
            .filter-tab {
                background-color: white;
                color: #6b7280;
                border: 1px solid #e5e7eb;
            }

            .filter-tab:hover {
                background-color: #f3f4f6;
                color: #374151;
            }

            .filter-tab.active {
                background-color: var(--primary);
                color: white;
                border-color: var(--primary);
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
